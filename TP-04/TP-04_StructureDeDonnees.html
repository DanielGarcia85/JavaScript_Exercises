<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>PANIER D'ACHAT</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
    </style>
</head>

<body>
    <h1>TP 4 - Panier d'achat</h1>
    <hr>
    <h2>Exercice 1 + 3</h2>
    <select id="articleselected">
        <option value="" selected disabled hidden>Choisir un fruit</option>
        <option value="pomme">Pomme</option>
        <option value="poire">Poire</option>
        <option value="banane">Banane</option>
        <option value="fraise">Fraise</option>
        <option value="ananas">Ananas</option>
        <option value="kiwi">Kiwi</option>
    </select>
    <input id="inp_nbarticle" placeholder="Quantité"></input>
    <button id="btn_add">Ajouter</button>
    <h2>Exercice 2</h2>
    <label id="lbl_nbarticle">Nombre total d'article dans le panier : <span id="spn_nbarticle">0</span></label>
    <br>
    <label id="lbl_listarticle">List des articles :</label>
    <br>
    <span id="spn_panier"></span>

</body>

<script>

    let panier = []
    let nbarticle = 0

    btn_add.addEventListener("click", ()=> {
        let article = document.getElementById('articleselected').value
        let quantite = Number(document.getElementById('inp_nbarticle').value)
        if(article == ""){
            alert("Vous devez selectionner un article");
        }else{
            if(quantite == "" || isNaN(quantite)){
                alert("Vous devez renseigner une quantité valide");
            }else{
                let art = panier.find((p)=>p.nom == article)
                if(!art){
                    art = {nom: article, qte: quantite}
                    nbarticle += quantite
                    panier.push(art)
                    panier.sort((p1, p2)=>p1.nom.localeCompare(p2.nom))
                }else{
                    art.qte += quantite
                    nbarticle += quantite
                }
                console.log(quantite)
                console.log(panier)
                afficherPanier()
            }
            
        }  
    });

    function afficherPanier(){
        spn_nbarticle.innerHTML = nbarticle
        spn_panier.innerHTML = "";
        panier.forEach((e)=> {
            spn_panier.innerHTML += e.qte + " " + e.nom + "<br>"
        }) 
    }
// 
</script>