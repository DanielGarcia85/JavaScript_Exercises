<meta charset="utf-8">
<select id="produits">
  <option></option>
  <option>Banane</option>
  <option>Kaki</option>
  <option>Poire</option>
  <option>Pomme</option>
</select>
<input id="quantite" placeholder="Quantité">
<button type="button" id="btnAjouter">Ajouter</button>
<p id="panierHtml"></p>
<script>
  let panier = [];
  btnAjouter.addEventListener('click', _=>{
    // Ajouter si un produit a été sélectionné:
    if(produits.value.length>0) {
      // Rechercher le produit dans le panier
      let produit = panier.find((p)=>p.nom == produits.value);
      if (!produit) {
        // S'il n'existe pas encore, le créer avec ses deux attributs, l'ajouter et trier
        produit = {nom: produits.value, qte:Number(quantite.value)};
        panier.push(produit);
        panier.sort((p1,p2)=>p1.nom.localeCompare(p2.nom));
      } else {
        // Mettre à jour la quantité
        produit.qte += Number(quantite.value);
      }

      // Le sort avec la fonction de comparaison "fait main"
      // panier.sort((p1,p2)=>{
      //   if (p1.nom<p2.nom) return -1;
      //   if (p1.nom>p2.nom) return 1;
      //   return 0;
      // });
      // Afficher dans la console
      console.log(panier);
      // Afficher dans la page
      afficherPanier();
    }
  })

  function afficherPanier() {
    // Vider l'affichage actuel
    panierHtml.innerHTML = '';
    // Parcourir et afficher les produits
    panier.forEach(produit=>{
      panierHtml.innerHTML += `${produit.nom} ${produit.qte}<br>`;
    })
  }



</script>
